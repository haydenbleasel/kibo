{
  "$schema": "https://ui.shadcn.com/schema/registry.json",
  "homepage": "https://www.kibo-ui.com/color-picker",
  "name": "color-picker",
  "type": "registry:ui",
  "author": "Hayden Bleasel <hello@haydenbleasel.com>",
  "registryDependencies": [],
  "dependencies": [
    "@number-flow/react",
    "@radix-ui/react-slider",
    "lucide-react"
  ],
  "devDependencies": [],
  "files": [
    {
      "type": "registry:ui",
      "path": "index.tsx",
      "content": "import { cn } from '@/lib/utils';\nimport { Range, Root, Thumb, Track } from '@radix-ui/react-slider';\nimport {\n  type HTMLAttributes,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { createContext, useContext } from 'react';\n\ninterface ColorPickerContextValue {\n  hue: number;\n  saturation: number;\n  lightness: number;\n  alpha: number;\n  setHue: (hue: number) => void;\n  setSaturation: (saturation: number) => void;\n  setLightness: (lightness: number) => void;\n  setAlpha: (alpha: number) => void;\n}\n\nconst ColorPickerContext = createContext<ColorPickerContextValue | undefined>(\n  undefined\n);\n\nexport const useColorPicker = () => {\n  const context = useContext(ColorPickerContext);\n\n  if (!context) {\n    throw new Error('useColorPicker must be used within a ColorPickerProvider');\n  }\n\n  return context;\n};\n\nexport type ColorPickerProps = HTMLAttributes<HTMLDivElement>;\n\nexport const ColorPicker = ({ className, ...props }: ColorPickerProps) => {\n  const [hue, setHue] = useState(0);\n  const [saturation, setSaturation] = useState(100);\n  const [lightness, setLightness] = useState(50);\n  const [alpha, setAlpha] = useState(100);\n\n  return (\n    <ColorPickerContext.Provider\n      value={{\n        hue,\n        saturation,\n        lightness,\n        alpha,\n        setHue,\n        setSaturation,\n        setLightness,\n        setAlpha,\n      }}\n    >\n      <div\n        className={cn(\n          'w-full rounded-md border bg-background p-4 shadow-sm',\n          className\n        )}\n        {...props}\n      />\n    </ColorPickerContext.Provider>\n  );\n};\n\nexport type ColorPickerSelectionProps = HTMLAttributes<HTMLDivElement>;\n\nexport const ColorPickerSelection = ({\n  className,\n  ...props\n}: ColorPickerSelectionProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const { hue, setSaturation } = useColorPicker();\n\n  const handlePointerMove = useCallback(\n    (event: PointerEvent) => {\n      if (!isDragging || !containerRef.current) {\n        return;\n      }\n\n      const rect = containerRef.current.getBoundingClientRect();\n      const x = Math.max(\n        0,\n        Math.min(1, (event.clientX - rect.left) / rect.width)\n      );\n      const y = Math.max(\n        0,\n        Math.min(1, (event.clientY - rect.top) / rect.height)\n      );\n\n      setPosition({ x, y });\n      setSaturation((1 - y) * 100);\n    },\n    [isDragging, setSaturation]\n  );\n\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener('pointermove', handlePointerMove);\n      window.addEventListener('pointerup', () => setIsDragging(false));\n    }\n    return () => {\n      window.removeEventListener('pointermove', handlePointerMove);\n      window.removeEventListener('pointerup', () => setIsDragging(false));\n    };\n  }, [isDragging, handlePointerMove]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={cn(\n        'relative aspect-[4/3] w-full cursor-crosshair rounded-sm',\n        `bg-[linear-gradient(0deg,rgb(0,0,0),transparent),linear-gradient(90deg,rgb(255,255,255),hsl(${hue},100%,50%))]`,\n        className\n      )}\n      onPointerDown={(e) => {\n        e.preventDefault();\n        setIsDragging(true);\n        handlePointerMove(e.nativeEvent);\n      }}\n      {...props}\n    >\n      <div\n        className=\"-translate-x-1/2 -translate-y-1/2 pointer-events-none absolute h-4 w-4 rounded-full border-2 border-white\"\n        style={{\n          left: `${position.x * 100}%`,\n          top: `${position.y * 100}%`,\n          boxShadow: '0 0 0 1px rgba(0,0,0,0.5)',\n        }}\n      />\n    </div>\n  );\n};\n\nexport type ColorPickerHueProps = HTMLAttributes<HTMLDivElement>;\n\nexport const ColorPickerHue = ({\n  className,\n  ...props\n}: ColorPickerHueProps) => {\n  const { setHue } = useColorPicker();\n\n  return (\n    <Root\n      defaultValue={[0]}\n      max={360}\n      step={1}\n      className={cn('relative flex h-4 w-full touch-none', className)}\n      onValueChange={([hue]) => setHue(hue)}\n      {...props}\n    >\n      <Track className=\"relative h-2 w-full grow bg-[linear-gradient(90deg,#FF0000,#FFFF00,#00FF00,#00FFFF,#0000FF,#FF00FF,#FF0000)]\">\n        <Range className=\"absolute h-full\" />\n      </Track>\n      <Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n    </Root>\n  );\n};\n\nexport type ColorPickerAlphaProps = HTMLAttributes<HTMLDivElement>;\n\nexport const ColorPickerAlpha = ({\n  className,\n  ...props\n}: ColorPickerAlphaProps) => {\n  const { setAlpha } = useColorPicker();\n\n  return (\n    <Root\n      defaultValue={[100]}\n      max={100}\n      step={1}\n      className={cn('relative flex h-4 w-full touch-none', className)}\n      onValueChange={([alpha]) => setAlpha(alpha)}\n      {...props}\n    >\n      <Track className=\"relative h-2 w-full grow rounded-full bg-secondary\">\n        <Range className=\"absolute h-full rounded-full bg-primary\" />\n      </Track>\n      <Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n    </Root>\n  );\n};\n\nexport type ColorPickerPreviewProps = HTMLAttributes<HTMLDivElement>;\n\nexport const ColorPickerPreview = ({\n  className,\n  ...props\n}: ColorPickerPreviewProps) => {\n  const { hue, saturation, lightness, alpha } = useColorPicker();\n\n  return (\n    <div\n      className={cn('h-10 w-10 rounded-sm', className)}\n      style={{\n        backgroundColor: `hsl(${hue}, ${saturation}%, ${lightness}%, ${alpha}%)`,\n      }}\n      {...props}\n    />\n  );\n};\n\nexport type ColorPickerOutputProps = HTMLAttributes<HTMLDivElement>;\n\nexport const ColorPickerOutput = ({\n  className,\n  ...props\n}: ColorPickerOutputProps) => {\n  const { hue, saturation, lightness, alpha } = useColorPicker();\n  const [mode, setMode] = useState<'hex' | 'rgba' | 'hsla'>('hex');\n\n  // Convert HSL to RGB\n  const hslToRgb = useCallback((h: number, s: number, l: number) => {\n    s /= 100;\n    l /= 100;\n    const k = (n: number) => (n + h / 30) % 12;\n    const a = s * Math.min(l, 1 - l);\n    const f = (n: number) =>\n      l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));\n    return [\n      Math.round(255 * f(0)),\n      Math.round(255 * f(8)),\n      Math.round(255 * f(4)),\n    ];\n  }, []);\n\n  // Convert RGB to Hex\n  const rgbToHex = useCallback((r: number, g: number, b: number) => {\n    return (\n      '#' +\n      [r, g, b]\n        .map((x) => {\n          const hex = x.toString(16);\n          return hex.length === 1 ? '0' + hex : hex;\n        })\n        .join('')\n    );\n  }, []);\n\n  const [r, g, b] = hslToRgb(hue, saturation, lightness);\n  const hex = rgbToHex(r, g, b);\n\n  const formats = {\n    hex: hex,\n    rgba: `rgba(${r}, ${g}, ${b}, ${alpha / 100})`,\n    hsla: `hsla(${hue}, ${saturation}%, ${lightness}%, ${alpha}%)`,\n  };\n\n  return (\n    <div className={cn('flex flex-col gap-2', className)} {...props}>\n      <div className=\"flex items-center gap-2\">\n        <button\n          type=\"button\"\n          onClick={() => setMode('hex')}\n          className={cn(\n            'rounded px-2 py-1 text-sm',\n            mode === 'hex'\n              ? 'bg-primary text-primary-foreground'\n              : 'bg-secondary'\n          )}\n        >\n          HEX\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setMode('rgba')}\n          className={cn(\n            'rounded px-2 py-1 text-sm',\n            mode === 'rgba'\n              ? 'bg-primary text-primary-foreground'\n              : 'bg-secondary'\n          )}\n        >\n          RGBA\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setMode('hsla')}\n          className={cn(\n            'rounded px-2 py-1 text-sm',\n            mode === 'hsla'\n              ? 'bg-primary text-primary-foreground'\n              : 'bg-secondary'\n          )}\n        >\n          HSLA\n        </button>\n      </div>\n      <div className=\"font-mono text-sm\">{formats[mode]}</div>\n    </div>\n  );\n};\n",
      "target": "components/ui/kibo-ui/color-picker.tsx"
    }
  ]
}